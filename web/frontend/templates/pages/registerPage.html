{% extends "base.html" %}

{% block content %}
    {% with last_crumb="Вход" %}
        {% include 'blocks/breadcrumbs.html' %}
    {% endwith %}
    <div class="content-area" style="text-align: center;">
        <div class="login_div" id="register-form">
            <div class="login_div_block">
                <h3>
                    Регистрация через соцсети
                </h3>
                <div class="login__social-media-wrap">
                    <div class="login__social-media">
                        <a class="icon icon_social-media icon_social-media_green social-gp_inv" 
                            href="{{ url('social:begin', args=['google-oauth2']) }}">
                        </a>
                        <a class="icon icon_social-media icon_social-media_green social-vk_inv"
                            href="{{ url('social:begin', args=['vk-oauth2']) }}">
                        </a>
                        <a class="icon icon_social-media icon_social-media_green social-odn_inv"
                            href="{{ url('social:begin', args=['odnoklassniki-oauth2']) }}">
                        </a>      
                        <a class="icon icon_social-media icon_social-media_green social-ya_inv"
                            href="{{ url('social:begin', args=['yandex-oauth2']) }}">
                        </a>
                        <a class="icon icon_social-media icon_social-media_green social-mail_inv"
                            href="{{ url('social:begin', args=['mailru-oauth2']) }}">
                        </a>
                    </div>
                </div>  
            </div>
            <div class="login_div_block">
                <h3>
                    Или 
                </h3>
                <div class="form__wrap">
                    <form method="POST" action="" class="form">
                        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                        <div class="input-box login__input-box">
                            <input class="input login__input"
                                type="text"
                                name="email"
                                placeholder="Email"
                                autocomplete="email"
                                v-model="customerEmail"
                                :class="{
                                    'input_success':customerEmail.length != 0 && emailIsValid, 
                                    'input_failure':emailError
                                }"
                            >
                        </div>
                        <div class="input-box login__input-box">
                            <input class="input login__input"
                                type="password"
                                name="password"
                                placeholder="Пароль"
                                v-model="password"
                                :class="{
                                    'input_success':passwordIsValid && passwordsMatch, 
                                    'input_failure':passwordError
                                }"
                            >
                        </div>
                        <div class="input-box login__input-box">
                            <input class="input login__input"
                                type="password"
                                name="password2"
                                placeholder="Повторите пароль"
                                v-model="password2"
                                :class="{
                                    'input_success':passwordIsValid && passwordsMatch, 
                                    'input_failure':passwordError
                                }"
                            >
                        </div>
                        <div class="button button_blue login__submit bold"
                            @click="submit"
                        >
                            Зарегестрироваться
                        </div>
                    </form>
                </div>
            </div>
            <div class="login__error-wrap">
                <errors
                    v-if="showErrors"
                    :email_is_valid="emailIsValid"
                    :password_is_valid="passwordIsValid"
                    :passwords_match="passwordsMatch"
                    :server_error="registrationFailed"
                >
                </errors>
            </div>
        </div>
        <div class="content-area" style="text-align: center;">
            {% if result %}
                <p>
                    {{ result }}
                </p>
            {% endif %}
            {% if fromOauth %}
                <p>
                    К сожалению, нам не удалось получить данные, необходимые для Регистрации. <br/>
                    Попробуйте другой способ.
                </p>
            {% endif %}
        </div>
    </div>

{% endblock content %}


{% block script %}
    {{ super() }}
    <script src="{{ static('js/registerPage.js') }}" type="text/javascript"></script>
{% endblock script %}
